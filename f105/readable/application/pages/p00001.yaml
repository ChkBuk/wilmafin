---
# ====== Page: Home ==========================================
id: 1
identification: 
  name: Home
  alias: HOME
  title: WILMAFIN

appearance: 
  page-mode: Normal
  page-template: Theme Default
  template-options: 
  - '#DEFAULT#'
  - js-pageStickyMobileHeader

navigation-menu: 
  override-user-interface-level: true
  list: Side Menu Bar # 15532001789282827
  list-position: Side
  list-template: Side Navigation Menu
  template-options: 
  - '#DEFAULT#'
  - t-TreeNav--styleB
  - js-navCollapsed--hidden

navigation: 
  cursor-focus: Do not focus cursor
  warn-on-unsaved-changes: true

css: 
  file-urls: 
  - '#APP_FILES#css/wm-style#MIN#.css'
  - '#APP_FILES#css/wm-home-style#MIN#.css'
  inline: |
    .apex-item-autocomplete-readonly, .apex-item-color-picker-readonly, .apex-item-combobox, .apex-item-combobox-readonly, .apex-item-datepicker-readonly, .apex-item-group-readonly, .apex-item-multi, .apex-item-number-readonly, .apex-item-popup-lov-readonly, .apex-item-select, .apex-item-select-one-many-readonly, .apex-item-select-readonly, .apex-item-text, .apex-item-text-readonly, .apex-item-textarea, .apex-item-textarea-readonly, .apex-item-wrapper--combobox-many .apex-item-comboselect, .apex-item-wrapper--select-many .apex-item-comboselect, .apex-item-wrapper.is-readonly .js-accessible-readonly, .datetimepicker_newMonth, .u-TF-item--select, .u-TF-item--text, select.group_selectlist, select.listmanager{
          line-height: 2rem;
        }
    #main-body{
        padding-bottom: 120px;
    }

security: 
  authentication: Page Requires Authentication
  deep-linking: Application Default
  page-access-protection: Arguments Must Have Checksum
  form-auto-complete: Off
  browser-cache: Application Default

session-management: 
  rejoin-sessions: Application Default

advanced: 
  enable-duplicate-page-submissions: Yes - Enable page to be re-posted
  reload-on-submit: Only for Success

server-cache: 
  caching: Disabled

regions: 
- # ====== Region: Nav Bar =====================================
  id: 15951464074011003
  identification: 
    name: Nav Bar
    type: Static Content

  layout: 
    sequence: 50
    parent-region: No Parent
    slot: BODY
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Buttons Container
    template-options: 
    - '#DEFAULT#'
    - t-ButtonRegion--stickToBottom
    - t-ButtonRegion--noPadding
    - margin-top-none
    - margin-bottom-none
    - margin-left-none
    - margin-right-none
    css-classes: 
    - bottom-btn-container
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: First Column ================================
  id: 16284999059233244
  identification: 
    name: First Column
    type: Static Content

  layout: 
    sequence: 10
    parent-region: MainBody # 19118738585806633
    slot: SUB_REGIONS
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--noPadding
    - t-Region--removeHeader js-removeLandmark
    - t-Region--noBorder
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    static-id: first-col
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: Second Column ===============================
  id: 16285092970233245
  identification: 
    name: Second Column
    type: Static Content

  layout: 
    sequence: 10
    parent-region: MainBody # 19118738585806633
    slot: SUB_REGIONS
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--noPadding
    - t-Region--removeHeader js-removeLandmark
    - t-Region--noBorder
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    static-id: second-col
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: Customer Count by Region ====================
  id: 16285115778233246
  identification: 
    name: Customer Count by Region
    title: Customer Count by Region
    type: Chart

  source: 
    location: None

  layout: 
    sequence: 10
    parent-region: Frame # 16820504489483243
    slot: SUB_REGIONS
    start-new-layout: false
    start-new-row: true
    column: 1
    new-column: true
    column-span: Automatic

  appearance: 
    template: Cards Container
    template-options: 
    - '#DEFAULT#'
    - t-CardsRegion--hideHeader js-addHiddenHeadingRoleDesc
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  security: 
    escape-special-characters: true

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    id: 16750773545557439
    chart: 
      type: Pie

    layout: 
      height: 400

    data-cursor: 
      cursor: Automatic
      behavior: Automatic
      dim-on-hover: true

    settings: 
      pie-selection-effect: Highlight

    value: 
      pie-chart-other-threshold: 0
      format: Decimal
      decimal-places: 0
      format-scaling: None

    animation: 
      on-display: Automatic
      on-data-change: Automatic

    tooltip: 
      show: true
      show-series-name: true
      show-value: true

    legend: 
      show: true
      position: Bottom
      hide-and-show-behavior: Rescale

    messages: 
      when-no-data-found: No data found.

    series: 
    - # ====== Series: Series ======================================
      id: 16750814674557440
      identification: 
        name: Series

      execution: 
        sequence: 10

      source: 
        location: Local Database
        type: SQL Query
        sql-query: |2
            SELECT 
              a.suburb, 
              a.state, 
              CASE MOD(ORA_HASH(suburb), 9)
                  -- Base colors
                  WHEN 0 THEN '#C7EF9E'
                  WHEN 1 THEN '#8ACDD9'
                  WHEN 2 THEN '#BDE9F1'
                  -- Lighter variations (tints)
                  WHEN 3 THEN '#E7F9CE'
                  WHEN 4 THEN '#C4E6EF'
                  WHEN 5 THEN '#DEF4F8'
                  -- Darker variations (shades)
                  WHEN 6 THEN '#A7CF7E'
                  WHEN 7 THEN '#5AB3C9'
                  WHEN 8 THEN '#9BD9E1'
              END as color_value_1,
              COUNT(*) customer_count 
          FROM (
              SELECT suburb, state
              FROM customers
              WHERE loan_amount IS NOT NULL
              AND state = NVL(:P1_STATE,'VIC')
          ) a
          GROUP BY a.suburb, a.state
          ORDER BY suburb;
        page-items-to-submit: 
        - P1_STATE

      order-by: 
        type: None

      column-mapping: 
        series-name: SUBURB
        label: SUBURB
        value: CUSTOMER_COUNT

      appearance: 
        color: '&COLOR_VALUE_1.'

      label: 
        show: true
        position: Automatic
        display-as: Label

- # ====== Region: Dashboard ===================================
  id: 16285364726233248
  identification: 
    name: Dashboard
    type: Cards

  source: 
    location: Local Database
    type: SQL Query
    sql-query: |
      SELECT COUNT(*) new_customers_month FROM customers 
      WHERE to_char(audit_created_date,'MM-YYYY') = to_char(SYSDATE,'MM-YYYY');

  order-by: 
    type: None

  layout: 
    sequence: 20
    parent-region: First Column # 16284999059233244
    slot: SUB_REGIONS
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Cards Container
    template-options: 
    - '#DEFAULT#'
    - t-CardsRegion--hideHeader js-addHiddenHeadingRoleDesc
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    static-id: new-customers
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    id: 16285491331233249
    appearance: 
      layout: Grid
      grid-columns: Auto

    title: 
      advanced-formatting: true
      html-expression: New Customers This Month

    subtitle: 
      advanced-formatting: false

    body: 
      advanced-formatting: false

    secondary-body: 
      advanced-formatting: true
      html-expression: <h1>&NEW_CUSTOMERS_MONTH.</h1>

    icon-and-badge: 
      icon-source: No Icon

    media: 
      advanced-formatting: false
      source: No Media

    performance: 
      lazy-loading: false

    pagination: 
      type: Scroll
      show-total-count: false

- # ====== Region: Row-1-Col-1 =================================
  id: 16285593343233250
  identification: 
    name: Row-1-Col-1
    type: Static Content

  layout: 
    sequence: 10
    parent-region: Second Column # 16285092970233245
    slot: SUB_REGIONS
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--noPadding
    - t-Region--removeHeader js-removeLandmark
    - t-Region--noBorder
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: Selection Container =========================
  id: 16747046807557402
  identification: 
    name: Selection Container
    type: Form

  source: 
    location: Local Database
    type: Table / View
    table-owner: Parsing Schema
    table-name: LOAN_CALCULATOR
    include-rowid-column: false

  layout: 
    sequence: 10
    parent-region: Frame # 19117701732806623
    slot: SUB_REGIONS
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--showIcon
    - t-Region--removeHeader js-removeLandmark
    - t-Region--noBorder
    - js-headingLevel-4
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    static-id: calculator-region
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    edit: 
      enabled: false

- # ====== Region: Row-2-Col-1 =================================
  id: 16747264081557404
  identification: 
    name: Row-2-Col-1
    type: Static Content

  layout: 
    sequence: 30
    parent-region: Second Column # 16285092970233245
    slot: SUB_REGIONS
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--noPadding
    - t-Region--removeHeader js-removeLandmark
    - t-Region--noBorder
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: Loan Purpose Breakdown ======================
  id: 16747373120557405
  identification: 
    name: Loan Purpose Breakdown
    type: Chart

  source: 
    location: Local Database
    type: SQL Query
    sql-query: |
      -- Loan Purpose Breakdown with Color Coding
      SELECT 
        CASE requirement
          WHEN 'FH' THEN 'First Home'
          WHEN 'RE' THEN 'Refinance'
          WHEN 'IN' THEN 'Investment'
          WHEN 'PL' THEN 'Personal Loan'
          WHEN 'VL' THEN 'Vehicle Loan'
          ELSE 'Other'
        END AS loan_type,
        COUNT(*) AS count,
        ROUND(AVG(loan_amount), 2) AS avg_amount,
        CASE MOD(ORA_HASH(requirement), 9)
          -- Base colors
          WHEN 0 THEN '#C7EF9E'  -- Light green
          WHEN 1 THEN '#8ACDD9'  -- Medium blue
          WHEN 2 THEN '#BDE9F1'  -- Light blue
          -- Lighter variations (tints)
          WHEN 3 THEN '#E7F9CE'  -- Very light green
          WHEN 4 THEN '#C4E6EF'  -- Very light medium blue
          WHEN 5 THEN '#DEF4F8'  -- Very light light blue
          -- Darker variations (shades)
          WHEN 6 THEN '#A7CF7E'  -- Dark green
          WHEN 7 THEN '#5AB3C9'  -- Dark medium blue
          WHEN 8 THEN '#9BD9E1'  -- Dark light blue
        END AS color_code
      FROM customers
      WHERE requirement IS NOT NULL
      GROUP BY requirement
      ORDER BY count DESC;

  order-by: 
    type: Item
    item: 
      item-name: P1_ORDER_BY
      order-bys: 
      - key: TOTAL_CUSTOMERS
        clause: '"TOTAL_CUSTOMERS" asc'

      - key: TOTAL_CUSTOMERS
        clause: '"TOTAL_CUSTOMERS" asc'

  layout: 
    sequence: 10
    parent-region: Frame # 16820741119483245
    slot: SUB_REGIONS
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Cards Container
    template-options: 
    - '#DEFAULT#'
    - t-CardsRegion--hideHeader js-addHiddenHeadingRoleDesc
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  security: 
    escape-special-characters: true

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    id: 16817128130483209
    chart: 
      type: Donut

    layout: 
      height: 400

    data-cursor: 
      cursor: Automatic
      behavior: Automatic
      dim-on-hover: true

    settings: 
      pie-selection-effect: Highlight

    value: 
      pie-chart-other-threshold: 0
      format: Decimal
      decimal-places: 0
      format-scaling: None

    animation: 
      on-display: Automatic
      on-data-change: Automatic

    tooltip: 
      show: true
      show-series-name: true
      show-value: true

    legend: 
      show: true
      position: Bottom
      hide-and-show-behavior: Rescale

    series: 
    - # ====== Series: New =========================================
      id: 16817252060483210
      identification: 
        name: New

      execution: 
        sequence: 10

      source: 
        location: Local Database
        type: SQL Query
        sql-query: |
          -- Loan Purpose Breakdown with Color Coding
          SELECT 
            CASE requirement
              WHEN 'FH' THEN 'First Home'
              WHEN 'RE' THEN 'Real Estate'
              WHEN 'IN' THEN 'Investment'
              WHEN 'PL' THEN 'Personal Loan'
              WHEN 'VL' THEN 'Vehicle Loan'
              ELSE 'Other'
            END AS loan_type,
            COUNT(*) AS count,
            ROUND(AVG(loan_amount), 2) AS avg_amount,
            CASE MOD(ORA_HASH(requirement), 9)
              -- Base colors
              WHEN 0 THEN '#C7EF9E'  -- Light green
              WHEN 1 THEN '#8ACDD9'  -- Medium blue
              WHEN 2 THEN '#BDE9F1'  -- Light blue
              -- Lighter variations (tints)
              WHEN 3 THEN '#E7F9CE'  -- Very light green
              WHEN 4 THEN '#C4E6EF'  -- Very light medium blue
              WHEN 5 THEN '#DEF4F8'  -- Very light light blue
              -- Darker variations (shades)
              WHEN 6 THEN '#A7CF7E'  -- Dark green
              WHEN 7 THEN '#5AB3C9'  -- Dark medium blue
              WHEN 8 THEN '#9BD9E1'  -- Dark light blue
            END AS COLOR_VALUE_2
          FROM customers
          WHERE requirement IS NOT NULL
          GROUP BY requirement
          ORDER BY count DESC;

      order-by: 
        type: None

      column-mapping: 
        series-name: LOAN_TYPE
        label: LOAN_TYPE
        value: COUNT
        custom-tooltip: COUNT
        custom-column: COUNT

      appearance: 
        color: '&COLOR_VALUE_2.'

      label: 
        show: true
        position: Automatic
        display-as: Label

- # ====== Region: Annual Income vs Requested Loan Amount ======
  id: 16747529972557407
  identification: 
    name: Annual Income vs Requested Loan Amount
    type: Chart

  source: 
    location: Local Database
    type: SQL Query
    sql-query: |
      
      SELECT 
        customer_id,
        CASE income_frequency
          WHEN 'A' THEN income_amount
          WHEN 'M' THEN income_amount*12
          WHEN 'W' THEN income_amount*52
        END AS annual_income,
        loan_amount,
        CASE income_frequency
          -- Assign colors based on income frequency
          WHEN 'A' THEN '#C7EF9E'  -- Annual (light green)
          WHEN 'M' THEN '#8ACDD9'  -- Monthly (medium blue)
          WHEN 'W' THEN '#BDE9F1'  -- Weekly (light blue)
          ELSE '#E7F9CE'           -- Default (very light green)
        END AS color_value_3,
        -- Additional column to display the frequency type
        CASE income_frequency
          WHEN 'A' THEN 'Annual'
          WHEN 'M' THEN 'Monthly'
          WHEN 'W' THEN 'Weekly'
          ELSE 'Unknown'
        END AS frequency_type
      FROM customers
      WHERE loan_amount IS NOT NULL;

  order-by: 
    type: Item
    item: 
      item-name: P1_ORDER_BY
      order-bys: 
      - key: TOTAL_CUSTOMERS
        clause: '"TOTAL_CUSTOMERS" asc'

      - key: TOTAL_CUSTOMERS
        clause: '"TOTAL_CUSTOMERS" asc'

  layout: 
    sequence: 10
    parent-region: Frame # 19117811686806624
    slot: SUB_REGIONS
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Cards Container
    template-options: 
    - '#DEFAULT#'
    - t-CardsRegion--hideHeader js-addHiddenHeadingRoleDesc
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  security: 
    escape-special-characters: true

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    id: 16816639306483204
    chart: 
      type: Bubble

    layout: 
      height: 400

    data-cursor: 
      cursor: Automatic
      behavior: Automatic
      dim-on-hover: true

    multi-series-chart-data: 
      fill-gaps-in-chart-data: true
      sort-order: Label - Ascending

    settings: 
      zoom-and-scroll: No

    animation: 
      on-display: Automatic
      on-data-change: Automatic

    tooltip: 
      show: true
      show-series-name: true
      show-group-name: true
      show-value: true

    legend: 
      show: true
      position: Bottom
      hide-and-show-behavior: Rescale

    series: 
    - # ====== Series: New =========================================
      id: 16816751778483205
      identification: 
        name: New

      execution: 
        sequence: 10

      source: 
        location: Local Database
        type: SQL Query
        sql-query: |
          SELECT 
            customer_id,
            CASE income_frequency
              WHEN 'A' THEN income_amount
              WHEN 'M' THEN income_amount*12
              WHEN 'W' THEN income_amount*52
            END AS annual_income,
            loan_amount,
            CASE income_frequency
              -- Assign colors based on income frequency
              WHEN 'A' THEN '#C7EF9E'  -- Annual (light green)
              WHEN 'M' THEN '#8ACDD9'  -- Monthly (medium blue)
              WHEN 'W' THEN '#BDE9F1'  -- Weekly (light blue)
              ELSE '#E7F9CE'           -- Default (very light green)
            END AS color_value_3,
            -- Additional column to display the frequency type
            CASE income_frequency
              WHEN 'A' THEN 'Annual'
              WHEN 'M' THEN 'Monthly'
              WHEN 'W' THEN 'Weekly'
              ELSE 'Unknown'
            END AS frequency_type
          FROM customers
          WHERE loan_amount IS NOT NULL;

      order-by: 
        type: Static Value
        order-by-clause: annual_income

      column-mapping: 
        series-name: FREQUENCY_TYPE
        label: ANNUAL_INCOME
        x: ANNUAL_INCOME
        y: LOAN_AMOUNT

      appearance: 
        color: '&COLOR_VALUE_3.'

      line: 
        style: Solid

      marker: 
        show: Automatic
        shape: Automatic

      label: 
        show: false

    axes: 
    - # ====== Axis: x =============================================
      id: 16819446210483232
      identification: 
        name: x
        show-axis: true
        title: Anual Income

      value: 
        format-scaling: Automatic
        baseline-scaling: Zero
        scale: Linear

      major-ticks: 
        show: Yes

      minor-ticks: 
        show: false

      tick-label: 
        show: true
        rotation: true
        position: Outside

    - # ====== Axis: y =============================================
      id: 16819513812483233
      identification: 
        name: y
        show-axis: true
        title: Loan Amount

      value: 
        format: Decimal
        decimal-places: 0
        format-scaling: None
        baseline-scaling: Zero
        scale: Linear

      appearance: 
        position: Automatic

      major-ticks: 
        show: Yes

      minor-ticks: 
        show: false

      tick-label: 
        show: true

- # ====== Region: Subscription Status =========================
  id: 16747780313557409
  identification: 
    name: Subscription Status
    type: Chart

  source: 
    location: Local Database
    type: SQL Query
    sql-query: |
      SELECT 
        is_subscribed,
        COUNT(*) AS count,
        ROUND(COUNT(*) * 100 / (SELECT COUNT(*) FROM customers), 2) AS percentage
      FROM customers
      GROUP BY is_subscribed;

  order-by: 
    type: Item
    item: 
      item-name: P1_ORDER_BY
      order-bys: 
      - key: TOTAL_CUSTOMERS
        clause: '"TOTAL_CUSTOMERS" asc'

      - key: TOTAL_CUSTOMERS
        clause: '"TOTAL_CUSTOMERS" asc'

  layout: 
    sequence: 10
    parent-region: Subscription Status # 16820450850483242
    slot: SUB_REGIONS
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Cards Container
    template-options: 
    - '#DEFAULT#'
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  security: 
    escape-special-characters: true

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    id: 16751628045557448
    chart: 
      type: Donut

    title: 
      title: Subscription Status

    layout: 
      height: 400

    data-cursor: 
      cursor: Automatic
      behavior: Automatic
      dim-on-hover: true

    settings: 
      pie-selection-effect: Highlight

    value: 
      pie-chart-other-threshold: 0
      format: Decimal
      decimal-places: 0
      format-scaling: None

    animation: 
      on-display: Automatic
      on-data-change: Automatic

    tooltip: 
      show: true
      show-series-name: true
      show-value: true

    legend: 
      show: true
      position: Bottom
      hide-and-show-behavior: Rescale

    series: 
    - # ====== Series: New =========================================
      id: 16751749759557449
      identification: 
        name: New

      execution: 
        sequence: 10

      source: 
        location: Local Database
        type: SQL Query
        sql-query: |
          SELECT 
            CASE WHEN is_subscribed = 'Y' THEN 'Subscribed' ELSE 'Unsubscribed' END AS subscription_status,
            COUNT(*) AS count,
            ROUND(COUNT(*) * 100 / (SELECT COUNT(*) FROM customers), 2) AS percentage,
            CASE 
              WHEN is_subscribed = 'Y' THEN '#5AB3C9'  -- Darker blue for subscribed
              ELSE '#A7CF7E'                           -- Darker green for unsubscribed
            END AS color_code
          FROM customers
          GROUP BY is_subscribed;

      order-by: 
        type: None

      column-mapping: 
        series-name: SUBSCRIPTION_STATUS
        label: COUNT
        value: COUNT

      appearance: 
        color: '&COLOR_CODE.'

      label: 
        show: false

- # ====== Region: Report ======================================
  id: 16747940278557411
  identification: 
    name: Report
    type: Classic Report

  source: 
    location: Local Database
    type: SQL Query
    sql-query: |
      SELECT 
        customer_id as list_title,
        salutation || ' ' || first_name || ' ' || surname AS list_text,
        phone_no,
        email,
        loan_amount,
        CASE priority_level WHEN 'H' THEN 'High' WHEN 'M' THEN 'Medium' ELSE 'Low' END list_badge,
        CASE priority_level WHEN 'H' THEN 1 WHEN 'M' THEN 2 ELSE 3 END priority_level_no,
        CASE priority_level WHEN 'H' THEN 'priority-high' WHEN 'M' THEN 'priority-medium' ELSE 'priority-low' END CSS_STYLE,
        audit_created_date
      FROM customers
      WHERE priority_level IN ('H', 'M', 'L')
      order by priority_level_no asc;

  order-by: 
    type: Static Value
    order-by-clause: priority_level_no asc

  layout: 
    sequence: 10
    parent-region: Priority Customer List # 16750400408557436
    slot: SUB_REGIONS
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Interactive Report
    template-options: 
    - '#DEFAULT#'
    - t-IRR-region--noBorders
    - t-IRR-region--hideHeader js-addHiddenHeadingRoleDesc
    render-components: Below Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  server-cache: 
    caching: Disabled

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    layout: 
      number-of-rows-type: Static Value
      number-of-rows: 5

    appearance: 
      template-type: Theme
      template: Media List
      template-options: 
      - '#DEFAULT#'
      - t-MediaList--showBadges
      - u-colors
      - t-MediaList--stack

    pagination: 
      type: Row Ranges X to Y (with next and previous links)
      display-position: Bottom - Right
      partial-page-refresh: false

    messages: 
      when-no-data-found: No data found.

    break-formatting: 
      break-columns: No Break

    advanced: 
      strip-html: false
      sort-nulls: Last

    heading: 
      type: Custom Headings

    download: 
      csv-export-enabled: false

    printing: 
      enabled: false

  columns: 
  - # ====== Column: PHONE_NO ====================================
    id: 16819855616483236
    identification: 
      column-name: PHONE_NO
      type: Hidden

    layout: 
      sequence: 50

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: EMAIL =======================================
    id: 16819950318483237
    identification: 
      column-name: EMAIL
      type: Hidden

    layout: 
      sequence: 60

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: LOAN_AMOUNT =================================
    id: 16820023232483238
    identification: 
      column-name: LOAN_AMOUNT
      type: Hidden

    layout: 
      sequence: 70

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: PRIORITY_LEVEL_NO ===========================
    id: 16820289964483240
    identification: 
      column-name: PRIORITY_LEVEL_NO
      type: Hidden

    layout: 
      sequence: 40

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: AUDIT_CREATED_DATE ==========================
    id: 16820348025483241
    identification: 
      column-name: AUDIT_CREATED_DATE
      type: Plain Text

    heading: 
      heading: Join on
      alignment: start

    layout: 
      sequence: 90
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema
      table-name: CUSTOMERS
      column: AUDIT_CREATED_DATE

    security: 
      escape-special-characters: true

  - # ====== Column: LIST_TITLE ==================================
    id: 19115711103806603
    identification: 
      column-name: LIST_TITLE
      type: Plain Text

    heading: 
      heading: List Title
      alignment: start

    layout: 
      sequence: 100
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: LIST_TEXT ===================================
    id: 19115831355806604
    identification: 
      column-name: LIST_TEXT
      type: Plain Text

    heading: 
      heading: List Text
      alignment: start

    layout: 
      sequence: 110
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: LIST_BADGE ==================================
    id: 19115962107806605
    identification: 
      column-name: LIST_BADGE
      type: Plain Text

    heading: 
      heading: List Badge
      alignment: start

    layout: 
      sequence: 130
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    column-formatting: 
      html-expression: <span class="#CSS_STYLE#">#LIST_BADGE#</span>

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: CSS_STYLE ===================================
    id: 19116272697806608
    identification: 
      column-name: CSS_STYLE
      type: Plain Text

    heading: 
      heading: Css Style
      alignment: start

    layout: 
      sequence: 140
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

- # ====== Region: Dashboard ===================================
  id: 16748198670557413
  identification: 
    name: Dashboard
    type: Cards

  source: 
    location: Local Database
    type: SQL Query
    sql-query: |
      SELECT TO_CHAR(ROUND(AVG(loan_amount), 2), '$999G999G990D00') AS avg_loan_amt FROM customers 
      WHERE loan_amount IS NOT NULL;

  order-by: 
    type: Item
    item: 
      item-name: P1_ORDER_BY
      order-bys: 
      - key: TOTAL_CUSTOMERS
        clause: '"TOTAL_CUSTOMERS" asc'

      - key: TOTAL_CUSTOMERS
        clause: '"TOTAL_CUSTOMERS" asc'

  layout: 
    sequence: 30
    parent-region: First Column # 16284999059233244
    slot: SUB_REGIONS
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Cards Container
    template-options: 
    - '#DEFAULT#'
    - t-CardsRegion--hideHeader js-addHiddenHeadingRoleDesc
    - margin-bottom-md
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    static-id: avg-loan-amt
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    id: 16748246624557414
    appearance: 
      layout: Grid
      grid-columns: Auto

    title: 
      advanced-formatting: true
      html-expression: Average Loan Amount Requested

    subtitle: 
      advanced-formatting: false

    body: 
      advanced-formatting: false

    secondary-body: 
      advanced-formatting: true
      html-expression: <h1>&AVG_LOAN_AMT.</h1>

    icon-and-badge: 
      icon-source: No Icon

    media: 
      advanced-formatting: false
      source: No Media

    performance: 
      lazy-loading: false

    pagination: 
      type: Scroll
      show-total-count: false

- # ====== Region: New Customers by Month ======================
  id: 16748383102557415
  identification: 
    name: New Customers by Month
    type: Static Content

  layout: 
    sequence: 40
    parent-region: First Column # 16284999059233244
    slot: SUB_REGIONS
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--noPadding
    - t-Region--scrollBody
    css-classes: 
    - frame
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: New Customers by Month ======================
  id: 16748454260557416
  identification: 
    name: New Customers by Month
    title: New Customers by Month
    type: Chart

  source: 
    location: Local Database
    type: SQL Query
    sql-query: |
      SELECT 
        to_number(TO_CHAR(audit_created_date, 'YYYY')) + to_number(TO_CHAR(audit_created_date, 'MM')) AS serial_no,
        TO_CHAR(audit_created_date, 'MON') AS month,
        COUNT(*) AS new_customers
      FROM customers
      where TO_CHAR(audit_created_date, 'YYYY') = TO_CHAR(sysdate, 'YYYY')
      GROUP BY to_number(TO_CHAR(audit_created_date, 'YYYY')) + to_number(TO_CHAR(audit_created_date, 'MM')) ,
               TO_CHAR(audit_created_date, 'MON')
      ORDER BY serial_no;

  order-by: 
    type: None

  layout: 
    sequence: 10
    parent-region: New Customers by Month # 16748383102557415
    slot: SUB_REGIONS
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--noPadding
    - js-showMaximizeButton
    - t-Region--removeHeader js-removeLandmark
    - t-Region--noBorder
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  security: 
    escape-special-characters: true

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    id: 16748729846557419
    chart: 
      type: Bar

    appearance: 
      orientation: Vertical
      stack: true
      stack-label: true

    layout: 
      height: 400

    data-cursor: 
      cursor: Automatic
      behavior: Automatic
      dim-on-hover: true

    multi-series-chart-data: 
      fill-gaps-in-chart-data: true
      sort-order: Label - Ascending
      render-gap-as-zero: true

    settings: 
      zoom-and-scroll: No

    animation: 
      on-display: Automatic
      on-data-change: Automatic

    tooltip: 
      show: true
      show-series-name: true
      show-group-name: true
      show-value: true

    legend: 
      show: false

    series: 
    - # ====== Series: New =========================================
      id: 16748806816557420
      identification: 
        name: New

      execution: 
        sequence: 10

      source: 
        location: Local Database
        type: SQL Query
        sql-query: |
          SELECT 
            to_number(TO_CHAR(audit_created_date, 'MM'))  AS serial_no,
            TO_CHAR(audit_created_date, 'MON') AS month,
            COUNT(*) AS new_customers,
            CASE MOD(to_number(TO_CHAR(audit_created_date, 'MM')), 9)
              -- Base colors
              WHEN 1 THEN '#C7EF9E'  -- January (light green)
              WHEN 2 THEN '#8ACDD9'  -- February (medium blue)
              WHEN 3 THEN '#BDE9F1'  -- March (light blue)
              -- Lighter variations (tints)
              WHEN 4 THEN '#E7F9CE'  -- April (very light green)
              WHEN 5 THEN '#C4E6EF'  -- May (very light medium blue)
              WHEN 6 THEN '#DEF4F8'  -- June (very light light blue)
              -- Darker variations (shades)
              WHEN 7 THEN '#A7CF7E'  -- July (dark green)
              WHEN 8 THEN '#5AB3C9'  -- August (dark medium blue)
              WHEN 0 THEN '#9BD9E1'  -- December (dark light blue - MOD 0 for month 12)
            END AS color_value_0
          FROM customers
          WHERE TO_CHAR(audit_created_date, 'YYYY') = TO_CHAR(sysdate, 'YYYY')
          GROUP BY to_number(TO_CHAR(audit_created_date, 'MM')),
                   TO_CHAR(audit_created_date, 'MON')
          ORDER BY serial_no;

      order-by: 
        type: None

      column-mapping: 
        series-name: MONTH
        label: MONTH
        value: NEW_CUSTOMERS
        custom-tooltip: NEW_CUSTOMERS
        legend-tooltip: NEW_CUSTOMERS
        label-tooltip: MONTH

      appearance: 
        color: '&COLOR_VALUE_0.'
        assigned-to-y2-axis: false

      label: 
        show: false

    axes: 
    - # ====== Axis: x =============================================
      id: 16748987775557421
      identification: 
        name: x
        show-axis: true

      value: 
        format-scaling: Automatic
        baseline-scaling: Zero
        scale: Linear

      major-ticks: 
        show: Yes

      minor-ticks: 
        show: false

      tick-label: 
        show: true
        rotation: true
        position: Outside

    - # ====== Axis: y =============================================
      id: 16749094212557422
      identification: 
        name: y
        show-axis: true
        title: Count

      value: 
        format: Decimal
        decimal-places: 0
        format-scaling: None
        baseline-scaling: Zero
        scale: Linear

      appearance: 
        position: Automatic

      major-ticks: 
        show: Yes

      minor-ticks: 
        show: false

      tick-label: 
        show: true

- # ====== Region: Priority Customer List ======================
  id: 16750400408557436
  identification: 
    name: Priority Customer List
    type: Static Content

  layout: 
    sequence: 50
    parent-region: Second Column # 16285092970233245
    slot: SUB_REGIONS
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--noPadding
    - t-Region--scrollBody
    css-classes: 
    - frame
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: InputField Container ========================
  id: 16818698240483224
  identification: 
    name: InputField Container
    type: Static Content

  layout: 
    sequence: 110
    parent-region: Selection Container # 16747046807557402
    slot: BODY
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--noPadding
    - t-Region--removeHeader js-removeLandmark
    - t-Region--noBorder
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: Subscription Status =========================
  id: 16820450850483242
  identification: 
    name: Subscription Status
    type: Static Content

  layout: 
    sequence: 50
    parent-region: First Column # 16284999059233244
    slot: SUB_REGIONS
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--noPadding
    - t-Region--scrollBody
    css-classes: 
    - frame
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: Frame =======================================
  id: 16820504489483243
  identification: 
    name: Frame
    title: Customer Count by Region
    type: Static Content

  layout: 
    sequence: 10
    parent-region: Row-1-Col-1 # 16285593343233250
    slot: SUB_REGIONS
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--noPadding
    - t-Region--scrollBody
    css-classes: 
    - frame
    icon: fa-user-chart
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: Frame =======================================
  id: 16820741119483245
  identification: 
    name: Frame
    title: Loan Purpose Breakdown
    type: Static Content

  layout: 
    sequence: 30
    parent-region: Row-2-Col-1 # 16747264081557404
    slot: SUB_REGIONS
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--noPadding
    - t-Region--scrollBody
    css-classes: 
    - frame
    icon: fa-pie-chart
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: Third Column ================================
  id: 19117143592806617
  identification: 
    name: Third Column
    type: Static Content

  layout: 
    sequence: 10
    parent-region: MainBody # 19118738585806633
    slot: SUB_REGIONS
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--noPadding
    - t-Region--removeHeader js-removeLandmark
    - t-Region--noBorder
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: Row-1-Col-1 =================================
  id: 19117215478806618
  identification: 
    name: Row-1-Col-1
    type: Static Content

  layout: 
    sequence: 40
    parent-region: Third Column # 19117143592806617
    slot: SUB_REGIONS
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--noPadding
    - t-Region--removeHeader js-removeLandmark
    - t-Region--noBorder
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: Row-2-Col-1 =================================
  id: 19117408378806620
  identification: 
    name: Row-2-Col-1
    type: Static Content

  layout: 
    sequence: 50
    parent-region: Third Column # 19117143592806617
    slot: SUB_REGIONS
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--noPadding
    - t-Region--removeHeader js-removeLandmark
    - t-Region--noBorder
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: Affordability Analysis ======================
  id: 19117668599806622
  identification: 
    name: Affordability Analysis
    type: Static Content

  layout: 
    sequence: 60
    parent-region: Third Column # 19117143592806617
    slot: SUB_REGIONS
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--noPadding
    - t-Region--scrollBody
    css-classes: 
    - frame
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: Frame =======================================
  id: 19117701732806623
  identification: 
    name: Frame
    title: Home Loan Calculator
    type: Static Content

  layout: 
    sequence: 10
    parent-region: Row-1-Col-1 # 19117215478806618
    slot: SUB_REGIONS
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--noPadding
    - t-Region--scrollBody
    css-classes: 
    - frame
    icon: fa-calculator
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: Frame =======================================
  id: 19117811686806624
  identification: 
    name: Frame
    title: Annual Income vs Requested Loan Amount
    type: Static Content

  layout: 
    sequence: 10
    parent-region: Row-2-Col-1 # 19117408378806620
    slot: SUB_REGIONS
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--noPadding
    - t-Region--scrollBody
    css-classes: 
    - frame
    icon: fa-money-bag
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: Affordability Analysis ======================
  id: 19117982264806625
  identification: 
    name: Affordability Analysis
    type: Classic Report

  source: 
    location: Local Database
    type: SQL Query
    sql-query: |
      -- Debt-to-Income Ratio Analysis
      SELECT 
        customer_id,
        ROUND(
          (monthly_expenses / 
          CASE income_frequency
            WHEN 'A' THEN income_amount/12
            WHEN 'M' THEN income_amount
            WHEN 'W' THEN income_amount*4
          END) * 100, 2
        ) AS Debt_To_Income_Ratio,
        loan_amount
      FROM customers
      WHERE income_amount > 0
      order by Debt_To_Income_Ratio asc;

  order-by: 
    type: None

  layout: 
    sequence: 10
    parent-region: Affordability Analysis # 19117668599806622
    slot: SUB_REGIONS
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Interactive Report
    template-options: 
    - '#DEFAULT#'
    - t-IRR-region--noBorders
    - t-IRR-region--hideHeader js-addHiddenHeadingRoleDesc
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  server-cache: 
    caching: Disabled

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    layout: 
      number-of-rows-type: Static Value
      number-of-rows: 9

    appearance: 
      template-type: Theme
      template: Standard
      template-options: 
      - '#DEFAULT#'
      - t-Report--stretch
      - t-Report--altRowsDefault
      - t-Report--rowHighlight

    pagination: 
      type: Row Ranges X to Y (with next and previous links)
      display-position: Bottom - Right
      partial-page-refresh: true

    performance: 
      lazy-loading: false

    messages: 
      when-no-data-found: No data found.

    break-formatting: 
      break-columns: No Break

    advanced: 
      strip-html: false
      sort-nulls: Last

    heading: 
      type: Custom Headings

    download: 
      csv-export-enabled: false

    printing: 
      enabled: false

  columns: 
  - # ====== Column: CUSTOMER_ID =================================
    id: 19118071071806626
    identification: 
      column-name: CUSTOMER_ID
      type: Plain Text

    heading: 
      heading: Customer Id
      alignment: start

    layout: 
      sequence: 10
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: LOAN_AMOUNT =================================
    id: 19118178128806627
    identification: 
      column-name: LOAN_AMOUNT
      type: Plain Text

    heading: 
      heading: Loan Amount
      alignment: end

    layout: 
      sequence: 20
      column-alignment: end

    accessibility: 
      value-identifies-row: false

    appearance: 
      format-mask: FML999G999G999G999G990D00

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: DEBT_TO_INCOME_RATIO ========================
    id: 19118212867806628
    identification: 
      column-name: DEBT_TO_INCOME_RATIO
      type: Plain Text

    heading: 
      heading: Debt To Income Ratio
      alignment: end

    layout: 
      sequence: 30
      column-alignment: end

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

- # ====== Region: MainBody ====================================
  id: 19118738585806633
  identification: 
    name: MainBody
    type: Static Content

  layout: 
    sequence: 10
    parent-region: No Parent
    slot: BODY
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--removeHeader js-removeLandmark
    - t-Region--scrollBody
    - margin-top-none
    - margin-bottom-none
    - margin-left-none
    - margin-right-none
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    static-id: main-body
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: Dashboard ===================================
  id: 33457399116350409
  identification: 
    name: Dashboard
    type: Cards

  source: 
    location: Local Database
    type: SQL Query
    sql-query: select count(*) AS total_customers from customers;

  order-by: 
    type: Item
    item: 
      item-name: P1_ORDER_BY
      order-bys: 
      - key: TOTAL_CUSTOMERS
        clause: '"TOTAL_CUSTOMERS" asc'

      - key: TOTAL_CUSTOMERS
        clause: '"TOTAL_CUSTOMERS" asc'

  layout: 
    sequence: 10
    parent-region: First Column # 16284999059233244
    slot: SUB_REGIONS
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Cards Container
    template-options: 
    - '#DEFAULT#'
    - t-CardsRegion--hideHeader js-addHiddenHeadingRoleDesc
    - margin-top-none
    icon: fa-person-standing
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    static-id: tot-customers
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    id: 16737823279506938
    appearance: 
      layout: Grid
      grid-columns: Auto

    title: 
      advanced-formatting: true
      html-expression: Total active customer

    subtitle: 
      advanced-formatting: false

    body: 
      advanced-formatting: false

    secondary-body: 
      advanced-formatting: true
      html-expression: <h1>&TOTAL_CUSTOMERS.</h1>

    icon-and-badge: 
      icon-source: No Icon

    media: 
      advanced-formatting: false
      source: No Media

    performance: 
      lazy-loading: false

    pagination: 
      type: Scroll
      show-total-count: false

page-items: 
- # ====== Page Item: P1_STATE =================================
  id: 16751199350557443
  identification: 
    name: P1_STATE
    type: Select List

  label: 
    label: State
    alignment: Left

  settings: 
    page-action-on-selection: None

  multiple-values: 
    type: No

  layout: 
    sequence: 10
    region: Frame # 16820504489483243
    slot: CREATE
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Above
    template-options: 
    - '#DEFAULT#'
    height: 1

  validation: 
    value-required: false

  list-of-values: 
    type: SQL Query
    sql-query: |
      select st.display_value, st.return_value from (
      select 'VIC' display_value, 'VIC' return_value, 1 priority from dual
      union
      select 'NSW' display_value, 'NSW' return_value, 2 priority from dual
      union
      select 'ACT' display_value, 'ACT' return_value, 4 priority from dual
      union
      select 'WA' display_value, 'WA' return_value, 5 priority from dual
      union
      select 'SA' display_value, 'SA' return_value, 3 priority from dual
      union
      select 'NT' display_value, 'NT' return_value, 7 priority from dual
      union
      select 'QLD' display_value, 'QLD' return_value, 8 priority from dual
      union
      select 'TAS' display_value, 'TAS' return_value, 6 priority from dual) st
      
      order by st.priority asc;
    display-extra-values: false
    display-null-value: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  default: 
    type: Static
    static-value: VIC

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1_CALCULATOR_ID =========================
  id: 16817696750483214
  identification: 
    name: P1_CALCULATOR_ID
    type: Hidden

  settings: 
    value-protected: true

  layout: 
    sequence: 10
    region: InputField Container # 16818698240483224
    slot: BODY

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    form-region: Selection Container # 16747046807557402
    column: CALCULATOR_ID
    data-type: NUMBER
    query-only: false
    primary-key: true

  session-state: 
    data-type: VARCHAR2
    storage: Per Request (Memory Only)

  security: 
    session-state-protection: Checksum Required - Session Level
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1_CALCULATOR_TYPE =======================
  id: 16817733707483215
  identification: 
    name: P1_CALCULATOR_TYPE
    type: Radio Group

  label: 
    label: Calculator Type
    alignment: Left

  settings: 
    number-of-columns: 3
    page-action-on-selection: None

  layout: 
    sequence: 20
    region: Selection Container # 16747046807557402
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Above
    template-options: 
    - '#DEFAULT#'
    css-classes: 
    - hidden-item

  validation: 
    value-required: false

  list-of-values: 
    type: Static Values
    static-values: 'STATIC:Home Loan;Home Loan,Repayment;Repayment,Car Loan;Car Loan'
    display-extra-values: false
    display-null-value: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    form-region: Selection Container # 16747046807557402
    column: CALCULATOR_TYPE
    data-type: VARCHAR2
    query-only: false
    primary-key: false

  session-state: 
    storage: Per Request (Memory Only)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    escape-special-characters: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1_INTEREST_RATE =========================
  id: 16817844201483216
  identification: 
    name: P1_INTEREST_RATE
    type: Number Field

  label: 
    label: Interest Rate
    alignment: Left

  settings: 
    number-alignment: Start
    virtual-keyboard: Decimal

  layout: 
    sequence: 30
    region: InputField Container # 16818698240483224
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Above
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: SQL Query (return single value)
    sql-query: "select config_value from am_configuration where config_name = nvl(:P1_PROPERTY_TYPE,'LIVE_IN');"
    used: Only when current value in session state is null

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1_PROPERTY_TYPE =========================
  id: 16817944063483217
  identification: 
    name: P1_PROPERTY_TYPE
    type: Radio Group

  label: 
    label: Property Type
    alignment: Left

  settings: 
    number-of-columns: 2
    page-action-on-selection: None

  layout: 
    sequence: 60
    region: InputField Container # 16818698240483224
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Above
    template-options: 
    - '#DEFAULT#'
    css-classes: 
    - radio-item

  validation: 
    value-required: false

  list-of-values: 
    type: Static Values
    static-values: 'STATIC:Live In;LIVE_IN,Invest;INVEST'
    display-extra-values: false
    display-null-value: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    form-region: Selection Container # 16747046807557402
    column: PROPERTY_TYPE
    data-type: VARCHAR2
    query-only: false
    primary-key: false

  session-state: 
    storage: Per Request (Memory Only)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    escape-special-characters: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1_BUYING_REASON =========================
  id: 16818039335483218
  identification: 
    name: P1_BUYING_REASON
    type: Hidden

  settings: 
    value-protected: false

  layout: 
    sequence: 80
    region: InputField Container # 16818698240483224
    slot: BODY

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    form-region: Selection Container # 16747046807557402
    column: BUYING_REASON
    data-type: VARCHAR2
    query-only: false
    primary-key: false

  session-state: 
    data-type: VARCHAR2
    storage: Per Request (Memory Only)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1_REPAYMENT_TYPE ========================
  id: 16818148114483219
  identification: 
    name: P1_REPAYMENT_TYPE
    type: Hidden

  settings: 
    value-protected: false

  layout: 
    sequence: 90
    region: InputField Container # 16818698240483224
    slot: BODY

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    form-region: Selection Container # 16747046807557402
    column: REPAYMENT_TYPE
    data-type: VARCHAR2
    query-only: false
    primary-key: false

  session-state: 
    data-type: VARCHAR2
    storage: Per Request (Memory Only)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1_AUDIT_DATE ============================
  id: 16818238741483220
  identification: 
    name: P1_AUDIT_DATE
    type: Hidden

  settings: 
    value-protected: false

  layout: 
    sequence: 70
    region: Selection Container # 16747046807557402
    slot: BODY

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    form-region: Selection Container # 16747046807557402
    column: AUDIT_DATE
    data-type: TIMESTAMP
    query-only: false
    primary-key: false

  session-state: 
    data-type: VARCHAR2
    storage: Per Request (Memory Only)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1_AUDIT_USER ============================
  id: 16818361831483221
  identification: 
    name: P1_AUDIT_USER
    type: Hidden

  settings: 
    value-protected: false

  layout: 
    sequence: 80
    region: Selection Container # 16747046807557402
    slot: BODY

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    form-region: Selection Container # 16747046807557402
    column: AUDIT_USER
    data-type: VARCHAR2
    query-only: false
    primary-key: false

  session-state: 
    data-type: VARCHAR2
    storage: Per Request (Memory Only)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1_AUDIT_PRODUCT =========================
  id: 16818423528483222
  identification: 
    name: P1_AUDIT_PRODUCT
    type: Hidden

  settings: 
    value-protected: false

  layout: 
    sequence: 90
    region: Selection Container # 16747046807557402
    slot: BODY

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    form-region: Selection Container # 16747046807557402
    column: AUDIT_PRODUCT
    data-type: VARCHAR2
    query-only: false
    primary-key: false

  session-state: 
    data-type: VARCHAR2
    storage: Per Request (Memory Only)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1_AUDIT_SESSION =========================
  id: 16818501462483223
  identification: 
    name: P1_AUDIT_SESSION
    type: Hidden

  settings: 
    value-protected: false

  layout: 
    sequence: 100
    region: Selection Container # 16747046807557402
    slot: BODY

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    form-region: Selection Container # 16747046807557402
    column: AUDIT_SESSION
    data-type: VARCHAR2
    query-only: false
    primary-key: false

  session-state: 
    data-type: VARCHAR2
    storage: Per Request (Memory Only)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1_REPAYMENT_AMT =========================
  id: 16818877641483226
  identification: 
    name: P1_REPAYMENT_AMT
    type: Number Field

  label: 
    label: Repayment Amt
    alignment: Left

  settings: 
    number-alignment: Start
    virtual-keyboard: Decimal

  layout: 
    sequence: 20
    region: InputField Container # 16818698240483224
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Above
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  default: 
    type: Static
    static-value: $410

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1_MODE ==================================
  id: 16818935027483227
  identification: 
    name: P1_MODE
    type: Select List

  label: 
    label: Mode
    alignment: Left

  settings: 
    page-action-on-selection: None

  multiple-values: 
    type: No

  layout: 
    sequence: 40
    region: InputField Container # 16818698240483224
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Above
    height: 1

  validation: 
    value-required: false

  list-of-values: 
    type: Static Values
    static-values: 'STATIC:Weekly;52,Fortnightly;26,Monthy;12'
    display-extra-values: false
    display-null-value: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1_LOAN_AMOUNT ===========================
  id: 16820932219483247
  identification: 
    name: P1_LOAN_AMOUNT
    type: Display Only

  label: 
    label: Loan Amount
    alignment: Left

  settings: 
    format: Plain Text
    based-on: Item Value
    show-line-breaks: false
    send-on-page-submit: true

  layout: 
    sequence: 100
    region: InputField Container # 16818698240483224
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    format-mask: FML999G999G999G999G990D00

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

  help: 
    help-text: |
      This amount can be changed slightly based on different conditions.
      <p>Also, this excludes stamp duty and LMI premium</p>

- # ====== Page Item: P1_TERM ==================================
  id: 16821252065483250
  identification: 
    name: P1_TERM
    type: Select List

  label: 
    label: Loan Term
    alignment: Left

  settings: 
    page-action-on-selection: None

  multiple-values: 
    type: No

  layout: 
    sequence: 50
    region: InputField Container # 16818698240483224
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Above
    template-options: 
    - '#DEFAULT#'
    height: 1

  validation: 
    value-required: false

  list-of-values: 
    type: SQL Query
    sql-query: |
      SELECT LEVEL + 2 || ' years' AS display_value,
             LEVEL + 2 AS return_value
      FROM   DUAL
      CONNECT BY LEVEL <= 28
      ORDER BY LEVEL;
    display-extra-values: false
    display-null-value: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1_ORDER_BY ==============================
  id: 33459158822350426
  identification: 
    name: P1_ORDER_BY
    type: Select List

  label: 
    label: Order By
    alignment: Left

  settings: 
    page-action-on-selection: None

  multiple-values: 
    type: No

  layout: 
    sequence: 10
    region: Dashboard # 33457399116350409
    slot: ORDER_BY_ITEM
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    height: 1

  validation: 
    value-required: true

  list-of-values: 
    type: Static Values
    static-values: 'STATIC2:Total Customers;TOTAL_CUSTOMERS'
    display-extra-values: false
    display-null-value: false

  advanced: 
    warn-on-unsaved-changes: Ignore

  source: 
    type: Null
    used: Only when current value in session state is null

  default: 
    type: Static
    static-value: TOTAL_CUSTOMERS

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

  configuration: 
    build-option: Commented Out # 14309379580069697

buttons: 
- # ====== Button: Home_1 ======================================
  id: 15951560482011004
  identification: 
    button-name: Home_1
    label: Home

  layout: 
    sequence: 20
    region: Nav Bar # 15951464074011003
    slot: BODY
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    alignment: Left center

  appearance: 
    button-template: Text with Icon
    hot: false
    template-options: 
    - '#DEFAULT#'
    - t-Button--mobileHideLabel
    - t-Button--iconLeft
    css-classes: 
    - bottom-mobile-btn
    icon: fa-lg fa-home

  behavior: 
    action: Redirect to Page in this Application
    target: 
      url: 'f?p=&APP_ID.:1:&SESSION.::&DEBUG.:1::'
      page: 1 # Home
      clear-cache: 1

    warn-on-unsaved-changes: Do Not Check

- # ====== Button: Add_1 =======================================
  id: 15951645532011005
  identification: 
    button-name: Add_1
    label: Add

  layout: 
    sequence: 30
    region: Nav Bar # 15951464074011003
    slot: BODY
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: Automatic
    alignment: Left center

  appearance: 
    button-template: Text with Icon
    hot: false
    template-options: 
    - '#DEFAULT#'
    - t-Button--mobileHideLabel
    - t-Button--iconLeft
    css-classes: 
    - bottom-mobile-btn
    icon: fa-lg fa-plus-circle-o

  behavior: 
    action: Redirect to Page in this Application
    target: 
      url: 'f?p=&APP_ID.:3:&SESSION.::&DEBUG.:3::'
      page: 3 # Add Customer
      clear-cache: 3

    warn-on-unsaved-changes: Do Not Check

- # ====== Button: Search_1 ====================================
  id: 15951713733011006
  identification: 
    button-name: Search_1
    label: Search

  layout: 
    sequence: 40
    region: Nav Bar # 15951464074011003
    slot: BODY
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: Automatic
    alignment: Left center

  appearance: 
    button-template: Text with Icon
    hot: false
    template-options: 
    - '#DEFAULT#'
    - t-Button--mobileHideLabel
    - t-Button--iconLeft
    css-classes: 
    - bottom-mobile-btn
    icon: fa-lg fa-table-search

  behavior: 
    action: Redirect to Page in this Application
    target: 
      url: 'f?p=&APP_ID.:2:&SESSION.::&DEBUG.:2::'
      page: 2 # Seach Customers
      clear-cache: 2

    warn-on-unsaved-changes: Do Not Check

- # ====== Button: Calculator ==================================
  id: 19118424897806630
  identification: 
    button-name: Calculator
    label: Re payment Calculator

  layout: 
    sequence: 70
    region: No Parent
    slot: AFTER_NAVIGATION_BAR
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    button-template: Icon
    hot: false
    template-options: 
    - t-Button--large
    - t-Button--noUI
    - t-Button--pillEnd
    - t-Button--gapRight
    icon: fa-lg fa-calculator

  behavior: 
    action: Defined by Dynamic Action
    execute-validations: true

dynamic-actions: 
- # ====== Dynamic Action: Change Bar Char Data ================
  id: 16751254800557444
  identification: 
    name: Change Bar Char Data

  execution: 
    sequence: 10
    event-scope: Static
    type: Immediate

  when: 
    event: Change
    selection-type: Item(s)
    item(s): 
    - P1_STATE

  actions: 
  - # ====== Action: Refresh =====================================
    id: 16751394922557445
    identification: 
      action: Refresh

    settings: 
      maintain-pagination: false

    affected-elements: 
      selection-type: Region
      region: Customer Count by Region # 16285115778233246

    execution: 
      sequence: 10
      event: Change Bar Char Data # 16751254800557444
      fire-when-event-result-is: True
      fire-on-initialization: false

- # ====== Dynamic Action: InitializeRepayment =================
  id: 16821040018483248
  identification: 
    name: InitializeRepayment

  execution: 
    sequence: 20
    event-scope: Static

  when: 
    event: Page Load

  configuration: 
    build-option: Commented Out # 14309379580069697

  actions: 
  - # ====== Action: Set Value ===================================
    id: 16821195769483249
    identification: 
      action: Set Value

    settings: 
      set-type: PL/SQL Function Body
      pl/sql-function-body: |
        return fin_loan_cal.calculate_repayment(
                           p_loan_amount   => :P1_REPAYMENT_AMT,
                           p_interest_rate => :P1_INTEREST_RATE,
                           p_frequency     => :P1_MODE,
                           p_term       => :P1_TERM
                         );
      items-to-submit: 
      - P1_INTEREST_RATE
      - P1_REPAYMENT_AMT
      - P1_MODE
      - P1_TERM
      escape-special-characters: true
      suppress-change-event: false

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P1_LOAN_AMOUNT

    execution: 
      sequence: 10
      event: InitializeRepayment # 16821040018483248
      fire-when-event-result-is: True
      fire-on-initialization: false
      stop-execution-on-error: true
      wait-for-result: true

- # ====== Dynamic Action: InitializeHomeLoan ==================
  id: 19115509514806601
  identification: 
    name: InitializeHomeLoan

  execution: 
    sequence: 30
    event-scope: Static

  when: 
    event: Page Load

  actions: 
  - # ====== Action: Execute Server-side Code ====================
    id: 19115695460806602
    identification: 
      action: Execute Server-side Code

    settings: 
      language: PE.PROPERTY.SOURCE_SNIPPET_LANG.LOV.PLSQL.D
      pl/sql-code: |
        declare
          v_loan_amt varchar2(100);
        begin
          fin_loan_cal.calculate_max_property_and_loan(
            p_repayment_amount => trim(regexp_replace(:P1_REPAYMENT_AMT, '[^0-9]', '')),      -- Repayment Amount
            p_mode             => :P1_MODE,       -- Repayment Mode: 12 (monthly), 26 (fortnightly), 52 (weekly)
            p_term             => :P1_TERM,      -- Loan Term in years
            p_interest_rate    => :P1_INTEREST_RATE,    -- Annual Interest Rate (percentage)
            loan_amt           => v_loan_amt
          );
         :P1_LOAN_AMOUNT := v_loan_amt;
        end;
        
      items-to-submit: 
      - P1_REPAYMENT_AMT
      - P1_MODE
      - P1_TERM
      - P1_INTEREST_RATE
      items-to-return: 
      - P1_LOAN_AMOUNT
      suppress-change-event: false

    execution: 
      sequence: 10
      event: InitializeHomeLoan # 19115509514806601
      fire-when-event-result-is: True
      fire-on-initialization: false
      stop-execution-on-error: true
      wait-for-result: true

- # ====== Dynamic Action: calHomeInterest&LoanAmt =============
  id: 19116395102806609
  identification: 
    name: calHomeInterest&LoanAmt

  execution: 
    sequence: 40
    event-scope: Static
    type: Immediate

  when: 
    event: Change
    selection-type: Item(s)
    item(s): 
    - P1_PROPERTY_TYPE

  actions: 
  - # ====== Action: Execute Server-side Code ====================
    id: 19116414523806610
    identification: 
      action: Execute Server-side Code

    settings: 
      language: PE.PROPERTY.SOURCE_SNIPPET_LANG.LOV.PLSQL.D
      pl/sql-code: |
        declare
          l_interest_rate number;
          v_loan_amt varchar2(100);
        begin    
        --   select interest_rate
        --     into l_interest_rate
        --     from loan_calculator
        --    where calculator_type = 'Home Loan'
        --      and property_type = :P1_PROPERTY_TYPE;
            select config_value into l_interest_rate from am_configuration where config_name = nvl(:P1_PROPERTY_TYPE,'LIVE_IN');
        
          :P1_INTEREST_RATE := l_interest_rate;
          fin_loan_cal.calculate_max_property_and_loan(
            p_repayment_amount => trim(regexp_replace(:P1_REPAYMENT_AMT, '[^0-9]', '')),      -- Repayment Amount
            p_mode             => :P1_MODE,       -- Repayment Mode: 12 (monthly), 26 (fortnightly), 52 (weekly)
            p_term             => :P1_TERM,      -- Loan Term in years
            p_interest_rate    => l_interest_rate,    -- Annual Interest Rate (percentage)
            loan_amt           => v_loan_amt
          );
        :P1_LOAN_AMOUNT := v_loan_amt;
        end;
        
      items-to-submit: 
      - P1_PROPERTY_TYPE
      - P1_REPAYMENT_AMT
      - P1_MODE
      - P1_TERM
      items-to-return: 
      - P1_INTEREST_RATE
      suppress-change-event: false

    execution: 
      sequence: 10
      event: calHomeInterest&LoanAmt # 19116395102806609
      fire-when-event-result-is: True
      fire-on-initialization: false
      stop-execution-on-error: true
      wait-for-result: true

- # ====== Dynamic Action: re-calHomeInterest&LoanAmt ==========
  id: 19116585493806611
  identification: 
    name: re-calHomeInterest&LoanAmt

  execution: 
    sequence: 50
    event-scope: Static
    type: Immediate

  when: 
    event: Change
    selection-type: Item(s)
    item(s): 
    - P1_MODE
    - P1_TERM
    - P1_INTEREST_RATE
    - P1_REPAYMENT_AMT

  actions: 
  - # ====== Action: Execute Server-side Code ====================
    id: 19116624085806612
    identification: 
      action: Execute Server-side Code

    settings: 
      language: PE.PROPERTY.SOURCE_SNIPPET_LANG.LOV.PLSQL.D
      pl/sql-code: |
        declare
          v_loan_amt varchar2(100);
        begin
          fin_loan_cal.calculate_max_property_and_loan(
            p_repayment_amount => trim(regexp_replace(:P1_REPAYMENT_AMT, '[^0-9]', '')),      -- Repayment Amount
            p_mode             => :P1_MODE,       -- Repayment Mode: 12 (monthly), 26 (fortnightly), 52 (weekly)
            p_term             => :P1_TERM,      -- Loan Term in years
            p_interest_rate    => :P1_INTEREST_RATE,    -- Annual Interest Rate (percentage)
            loan_amt           => v_loan_amt
          );
         :P1_LOAN_AMOUNT := v_loan_amt;
        end;
        
      items-to-submit: 
      - P1_REPAYMENT_AMT
      - P1_MODE
      - P1_TERM
      - P1_INTEREST_RATE
      items-to-return: 
      - P1_LOAN_AMOUNT
      suppress-change-event: false

    execution: 
      sequence: 10
      event: re-calHomeInterest&LoanAmt # 19116585493806611
      fire-when-event-result-is: True
      fire-on-initialization: false
      stop-execution-on-error: true
      wait-for-result: true

- # ====== Dynamic Action: re-calHomeInterest&LoanAmt_1 ========
  id: 19116771165806613
  identification: 
    name: re-calHomeInterest&LoanAmt_1

  execution: 
    sequence: 60
    event-scope: Static
    type: Immediate

  when: 
    event: Key Release
    selection-type: Item(s)
    item(s): 
    - P1_MODE
    - P1_TERM
    - P1_INTEREST_RATE
    - P1_REPAYMENT_AMT

  actions: 
  - # ====== Action: Execute Server-side Code ====================
    id: 19116896588806614
    identification: 
      action: Execute Server-side Code

    settings: 
      language: PE.PROPERTY.SOURCE_SNIPPET_LANG.LOV.PLSQL.D
      pl/sql-code: |
        declare
          v_loan_amt varchar2(100);
        begin
          fin_loan_cal.calculate_max_property_and_loan(
            p_repayment_amount => trim(regexp_replace(:P1_REPAYMENT_AMT, '[^0-9]', '')),      -- Repayment Amount
            p_mode             => :P1_MODE,       -- Repayment Mode: 12 (monthly), 26 (fortnightly), 52 (weekly)
            p_term             => :P1_TERM,      -- Loan Term in years
            p_interest_rate    => :P1_INTEREST_RATE,    -- Annual Interest Rate (percentage)
            loan_amt           => v_loan_amt
          );
         :P1_LOAN_AMOUNT := v_loan_amt;
        end;
        
      items-to-submit: 
      - P1_REPAYMENT_AMT
      - P1_MODE
      - P1_TERM
      - P1_INTEREST_RATE
      items-to-return: 
      - P1_LOAN_AMOUNT
      suppress-change-event: false

    execution: 
      sequence: 10
      event: re-calHomeInterest&LoanAmt_1 # 19116771165806613
      fire-when-event-result-is: True
      fire-on-initialization: false
      stop-execution-on-error: true
      wait-for-result: true

- # ====== Dynamic Action: New =================================
  id: 19118505956806631
  identification: 
    name: New

  execution: 
    sequence: 70
    event-scope: Static
    type: Immediate

  when: 
    event: Click
    selection-type: Button
    button: Calculator # 19118424897806630

  actions: 
  - # ====== Action: Execute JavaScript Code =====================
    id: 19118625950806632
    identification: 
      action: Execute JavaScript Code

    settings: 
      code: |
        // Smooth scroll to the region
        $('html, body').animate({
            scrollTop: $('#calculator-region').offset().top - 190 // Adjust offset as needed
        }, 500); // 500ms animation duration

    execution: 
      sequence: 10
      event: New # 19118505956806631
      fire-when-event-result-is: True
      fire-on-initialization: false

processes: 
- # ====== Process: Invoke Workflow ============================
  id: 15043942364162319
  identification: 
    name: Invoke Workflow
    type: Workflow
    execution-chain: None

  settings: 
    type: Start
    definition: ROI Workflow # 15029879911839076
    details-primary-key-item: ':APP_USER'

  execution: 
    sequence: 10
    point: Processing
    run-process: Once Per Page Visit (default)

  success-message: 
    success-message: Invoked Workflow.

  error: 
    error-message: Error in Workflow.
    display-location: Inline in Notification

  parameters: 
  - # ====== Parameter: Client Email =============================
    id: 15044381699162320
    identification: 
      name: Client Email # 15030047510839078

    parameter: 
      direction: In
      data-type: VARCHAR2

    value: 
      type: Static Value
      static-value: cbkulawardana@gmail.com

  - # ====== Parameter: Client Name ==============================
    id: 15309662417301913
    identification: 
      name: Client Name # 14989451658663226

    parameter: 
      direction: In
      data-type: VARCHAR2

    value: 
      type: Default

  - # ====== Parameter: Client Reference =========================
    id: 15320433296377599
    identification: 
      name: Client Reference # 14989543930663227

    parameter: 
      direction: In
      data-type: VARCHAR2

    value: 
      type: Item

  - # ====== Parameter: Company Email ============================
    id: 15390716798601167
    identification: 
      name: Company Email # 14990778642663239

    parameter: 
      direction: In
      data-type: VARCHAR2

    value: 
      type: Item

  - # ====== Parameter: Date of Join =============================
    id: 15663468990341387
    identification: 
      name: Date of Join # 15657844121334401

    parameter: 
      direction: In
      data-type: VARCHAR2

    value: 
      type: Null

  - # ====== Parameter: Client Address ===========================
    id: 15664759069341388
    identification: 
      name: Client Address # 15657962137334402

    parameter: 
      direction: In
      data-type: VARCHAR2

    value: 
      type: Null

  - # ====== Parameter: Client Phone No ==========================
    id: 15679198971559484
    identification: 
      name: Client Phone No # 15658301319334406

    parameter: 
      direction: In
      data-type: VARCHAR2

    value: 
      type: Null

  - # ====== Parameter: Anual Income =============================
    id: 15680872482708663
    identification: 
      name: Anual Income # 15658499050334407

    parameter: 
      direction: In
      data-type: NUMBER

    value: 
      type: Null

  - # ====== Parameter: Loan Amount ==============================
    id: 15682961270720219
    identification: 
      name: Loan Amount # 15658554186334408

    parameter: 
      direction: In
      data-type: VARCHAR2

    value: 
      type: Null

  - # ====== Parameter: Priority Level ===========================
    id: 15684268128720220
    identification: 
      name: Priority Level # 15658691967334409

    parameter: 
      direction: In
      data-type: VARCHAR2

    value: 
      type: Null

  - # ====== Parameter: Requirement ==============================
    id: 15710783889031236
    identification: 
      name: Requirement # 15659501487334418

    parameter: 
      direction: In
      data-type: VARCHAR2

    value: 
      type: Null

- # ====== Process: Initialize form Home =======================
  id: 16817517453483213
  identification: 
    name: Initialize form Home
    type: Form - Initialization
    execution-chain: None
    form-region: Selection Container # 16747046807557402

  execution: 
    sequence: 20
    point: Before Header
    run-process: Once Per Page Visit (default)

  server-side-condition: 
    type: Rows returned
    sql-query: select * from loan_calculator;

- # ====== Process: Set Loan Calculate PK ======================
  id: 16818753837483225
  identification: 
    name: Set Loan Calculate PK
    type: Execute Code
    execution-chain: None

  source: 
    location: Local Database
    language: PL/SQL
    pl/sql-code: |
      begin           
        :P1_CALCULATOR_ID := 2;
      end;

  execution: 
    sequence: 10
    point: Before Header
    run-process: Once Per Page Visit (default)

branches: 
- # ====== Branch: Back ========================================
  id: 15494765159757212
  identification: 
    name: Back

  execution: 
    sequence: 10
    point: Processing

  behavior: 
    type: Page or URL (Redirect)
    target: 
      url: 'f?p=&APP_ID.:1:&SESSION.::&DEBUG.:2::&success_msg=#SUCCESS_MSG#'
      page: 1 # Home
      clear-cache: 2

